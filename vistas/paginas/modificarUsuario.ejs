<link rel="stylesheet" href="/css/modificarUsuario.css">

<form id="edit" name="edit" action="/usuarios/modificarUsuario" method="POST">
    <% if (error) { %>
        <div style="color: red; font-weight: bold;"><%= error %></div>
    <% } %>
    <fieldset>
        <legend>Modificar Datos:</legend>

        <div>
            <label>Nuevo Nombre:</label>
            <input type="text" name="nombre" value="<%= datos?.nombre || '' %>" />
            <% if (errores?.nombre) { %>
                <span style="color: red;"><%= errores.nombre.msg %></span>
            <% } %>
        </div>
        
        <!-- Apellidos -->
        <div>
            <label>Nuevos Apellidos:</label>
            <input type="text" name="apellidos" value="<%= datos?.apellidos || '' %>" />
            <% if (errores?.apellidos) { %>
                <span style="color: red;"><%= errores.apellidos.msg %></span>
            <% } %>
        </div>

        <!-- Email -->
        <div>
            <label>Nuevo Email:</label>
            <input type="text" name="email" value="<%= datos?.email || '' %>" pattern=".+@(gmail\.com|ucm\.es)" title="El email debe ser válido" />
            <% if (errores?.email) { %>
                <!--<span style="color: red;"><%= errores.email.msg %></span>-->
                <span class="error"><%= errores.email.msg %></span>
            <% } %>
            <span class="feedback"></span>
        </div>

        <!-- Username -->
        <div>
            <label>Nuevo Usuario:</label>
            <input type="text" name="username" value="<%= datos?.username || '' %>" />
            <% if (errores?.username) { %>
                <!--<span style="color: red;"><%= errores.username.msg %></span>-->
                <span class="error"><%= errores.username.msg %></span>
            <% } %>
            <span class="feedback"></span>  <!-- aquí el ✔/⚠ -->
        </div>

        <!-- Contraseña -->
        <div>
            <label>Nueva Contraseña:</label>
            <input type="password" name="password" />
            <span class="error"></span>
                <% if (errores?.password) { %>
                <span style="color: red;"><%= errores.password.msg %></span>
            <% } %>
        </div>

        <div>
            <label>Nueva Fecha de Nacimiento:</label>
            <input type="date" name="fecha_nacimiento" max="<%= new Date().toISOString().split('T')[0] %>" />
        </div>

        <div>
            <label for="rol">Tipo de cuenta:</label>
            <select name="rol" id="rol" required>
                <option value="usuario">Usuario</option>
                <option value="empresa">Empresa</option>
                <option value="administrador">Administrador</option>
            </select>
        </div>

        <!--Botón para enviar el formulario-->
        <p>
        <input type="submit" name="enviar" value="Enviar"/>
        </p>
    </fieldset>
</form>

<script src="/js/fetch.js"></script>
<script src="/js/edit.js"></script>